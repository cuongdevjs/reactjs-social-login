import e,{memo as t,useRef as o,useState as n,useEffect as r,useCallback as i}from"react";function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var s=window,d=t(function(t){var a=t.state,d=void 0===a?"":a,l=t.client_id,u=t.className,p=t.redirect_uri,h=t.scope,m=void 0===h?"profile":h,v=t.isOnlyGetToken,f=void 0!==v&&v,g=t.scope_data,w=void 0===g?{profile:{essential:!0}}:g,_=t.response_type,y=void 0===_?"token":_,k=t.children,b=t.onReject,S=t.onResolve,P=t.onLoginStart,L=o(null),j=n(!1),E=j[0],I=j[1];r(function(){!E&&G()},[E]),r(function(){return function(){L.current&&L.current.remove()}},[]);var T=i(function(){return!!document.getElementById("amazon-login")},[]),R=i(function(e,t,o,n,r){void 0===t&&(t="script");var i=e.createElement(t);i.id=o,i.src=n,i.async=!0,i.defer=!0;var c=document.getElementsByTagName("script")[0];L.current=i,c&&c.parentNode&&c.parentNode.insertBefore(i,c),i.onload=r},[]),N=i(function(e){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){S({provider:"amazon",data:c({},t,e)})}).catch(function(e){b(e)}).finally(function(){}),Promise.resolve()}catch(e){return Promise.reject(e)}},[b,S]),z=i(function(e){f?S({provider:"amazon",data:c({},e)}):N(e)},[N,S,f]),C=i(function(e){b(e)},[b]),G=i(function(){T()?I(!0):R(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){s.amazon.Login.setClientId(l),I(!0)})},[T,l,R]),O=i(function(){E&&(s.amazon?(P&&P(),s.amazon.Login.authorize({scope:m,scope_data:w,response_type:y,redirect_uri:p,state:d},function(e){e.error?C(e.error):z(e)})):(G(),b("Google SDK isn't loaded!")))},[G,m,d,b,w,E,C,P,p,y,z]);return e.createElement("div",{className:u,onClick:O},k)}),l=window,u=t(function(t){var a=t.appId,s=t.configId,d=void 0===s?"":s,u=t.scope,p=void 0===u?"email,public_profile":u,h=t.state,m=void 0===h||h,v=t.xfbml,f=void 0===v||v,g=t.cookie,w=void 0===g||g,_=t.version,y=void 0===_?"v2.7":_,k=t.language,b=void 0===k?"en_EN":k,S=t.auth_type,P=void 0===S?"":S,L=t.className,j=t.onLoginStart,E=t.onReject,I=t.onResolve,T=t.redirect_uri,R=t.fieldsProfile,N=void 0===R?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":R,z=t.response_type,C=void 0===z?"code":z,G=t.return_scopes,O=void 0===G||G,x=t.isOnlyGetToken,B=void 0!==x&&x,A=t.children,U=o(null),F=n(!1),D=F[0],H=F[1],q=n(!1),K=q[0],M=q[1];r(function(){!D&&X()},[D]),r(function(){return function(){U.current&&U.current.remove()}},[]);var J=i(function(e,t){var o=e.createElement("script");o.id="facebook-jssdk",o.src="https://connect.facebook.net/en_EN/sdk.js";var n=e.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(o,n),t()},[]),$=i(function(){return!!document.getElementById("facebook-jssdk")},[]),Q=i(function(e,t){var o=window;o.fbAsyncInit=function(){o.FB&&o.FB.init(c({},e)),H(!0);var n=t.getElementById("fb-root");n||((n=t.createElement("div")).id="fb-root",t.body.appendChild(n)),U.current=n}},[]),V=i(function(e){l.FB.api("/me",{locale:b,fields:N},function(t){I({provider:"facebook",data:c({},e,t)})})},[N,b,I]),W=i(function(e){e.authResponse?B?I({provider:"facebook",data:c({},e.authResponse)}):V(e.authResponse):E(e),M(!1)},[V,B,E,I]),X=i(function(){$()?H(!0):J(document,function(){Q({appId:a,xfbml:f,version:y,state:m,cookie:w,redirect_uri:T,response_type:C},document)})},[m,a,f,w,y,Q,T,C,J,$]),Y=i(function(){if(D&&!K)if(l.FB){M(!0),j&&j();var e={scope:p,return_scopes:O,auth_type:P};d&&(e.config_id=d),l.FB.login(W,e)}else X(),E("Fb isn't loaded!"),M(!1)},[X,d,p,E,P,D,j,K,O,W]);return e.createElement("div",{className:L,onClick:Y},A)}),p="875c0462-6309-4ddf-9889-5227b1acc82c",h=window,m=t(function(t){var a=t.client_id,s=t.scope,d=void 0===s?"https://www.googleapis.com/auth/userinfo.profile":s,l=t.prompt,u=void 0===l?"select_account":l,m=t.typeResponse,v=void 0===m?"accessToken":m,f=t.ux_mode,g=t.className,w=void 0===g?"":g,_=t.login_hint,y=void 0===_?"":_,k=t.access_type,b=void 0===k?"online":k,S=t.onLoginStart,P=t.onReject,L=t.onResolve,j=t.redirect_uri,E=void 0===j?"/":j,I=t.auto_select,T=void 0!==I&&I,R=t.isOnlyGetToken,N=void 0!==R&&R,z=t.cookie_policy,C=void 0===z?"single_host_origin":z,G=t.hosted_domain,O=void 0===G?"":G,x=t.discoveryDocs,B=void 0===x?"":x,A=t.children,U=t.fetch_basic_profile,F=void 0===U||U,D=o(null),H=n(!1),q=H[0],K=H[1],M=n(null),J=M[0],$=M[1];r(function(){!q&&Z()},[q]),r(function(){return function(){D.current&&D.current.remove()}},[]);var Q=i(function(){return!!document.getElementById("google-login")},[]),V=i(function(e,t,o,n,r){void 0===t&&(t="script");var i=e.createElement(t);i.id=o,i.src=n,i.async=!0,i.defer=!0;var c=document.getElementsByTagName("script")[0];D.current=i,c&&c.parentNode&&c.parentNode.insertBefore(i,c),i.onload=r},[]),W=i(function(e){if("accessToken"===v){var t=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p,Authorization:"Bearer "+e.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:t}).then(function(e){return e.json()}).then(function(t){var o=c({},e,t);L({provider:"google",data:o})}).catch(function(e){P(e)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+e.credential,{method:"GET"}).then(function(e){return e.json()}).then(function(t){var o=c({},e,t);L({provider:"google",data:o})}).catch(function(e){P(e)})},[v,P,L]),X=i(function(e){e&&"offline"===b||N?L({provider:"google",data:e}):W(e)},[b,N,W,L]),Y=i(function(e){P({provider:"google",data:e})},[P]),Z=i(function(){Q()?K(!0):V(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var e={client_id:a,ux_mode:f},t=null;if("idToken"===v)h.google.accounts.id.initialize(c({},e,{auto_select:T,prompt:"select_account",login_uri:E,callback:X,native_callback:X,error_callback:Y}));else{var o=c({},e,{scope:d,prompt:u,login_hint:y,access_type:b,hosted_domain:O,redirect_uri:E,cookie_policy:C,discoveryDocs:B,immediate:!0,fetch_basic_profile:F,callback:X,error_callback:Y});t="offline"===b?h.google.accounts.oauth2.initCodeClient(o):h.google.accounts.oauth2.initTokenClient(o)}t&&$(t),K(!0)})},[d,u,f,a,y,T,b,E,v,B,C,O,X,Y,F,V,Q]),ee=i(function(){q&&(h.google?(S&&S(),J?"offline"===b?J.requestCode():J.requestAccessToken():h.google.accounts.id.prompt()):(Z(),P("Google SDK isn't loaded!")))},[b,J,q,Z,S,P]);return e.createElement("div",{className:w,onClick:ee},A)}),v=t(function(t){var o=t.state,n=void 0===o?"":o,s=t.scope,d=void 0===s?"repo,gist":s,l=t.client_id,u=t.client_secret,h=t.className,m=void 0===h?"":h,v=t.redirect_uri,f=t.allow_signup,g=void 0!==f&&f,w=t.isOnlyGetToken,_=void 0!==w&&w,y=t.isOnlyGetCode,k=void 0!==y&&y,b=t.children,S=t.onReject,P=t.onResolve,L=t.onLoginStart;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_github")&&t&&(localStorage.setItem("github",t),window.close())},[]);var j=i(function(e){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+e.access_token,"x-cors-grida-api-key":p}}).then(function(e){return e.json()}).then(function(t){P({provider:"github",data:c({},t,e)})}).catch(function(e){S(e)})},[S,P]),E=i(function(e){if(k)P({provider:"github",data:{code:e}});else{var t={code:e,state:n,redirect_uri:v,client_id:l,client_secret:u},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.text()}).then(function(e){for(var t,o={},n=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,void 0):void 0}}(e))){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(new URLSearchParams(e));!(t=n()).done;){var r=t.value;o[r[0]]=r[1]}o.access_token?_?P({provider:"github",data:o}):j(o):S("no data")}).catch(function(e){S(e)})}},[n,S,j,P,l,v,u,k,_]),I=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"github"===n&&o&&E(o))}catch(e){return Promise.reject(e)}},[E]),T=i(function(){window.removeEventListener("storage",T,!1);var e=localStorage.getItem("github");e&&(I({provider:"github",type:"code",code:e}),localStorage.removeItem("github"))},[I]),R=i(function(){L&&L(),window.addEventListener("storage",T,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+l+"&scope="+d+"&state="+n+"_github&redirect_uri="+v+"&allow_signup="+g,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[d,n,l,v,g,L,T]);return e.createElement("div",{className:m,onClick:R},b)}),f=t(function(t){var o=t.state,n=void 0===o?"":o,a=t.client_id,s=t.client_secret,d=t.className,l=t.redirect_uri,u=t.fields,h=void 0===u?"id,username,account_type,media_count":u,m=t.scope,v=void 0===m?"user_profile,user_media":m,f=t.response_type,g=void 0===f?"code":f,w=t.isOnlyGetCode,_=void 0!==w&&w,y=t.isOnlyGetToken,k=void 0!==y&&y,b=t.children,S=t.onReject,P=t.onResolve,L=t.onLoginStart;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_instagram")&&t&&(localStorage.setItem("instagram",t),window.close())},[]);var j=i(function(e){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+h+"&access_token="+e.access_token,{method:"GET",headers:{"x-cors-grida-api-key":p}}).then(function(e){return e.json()}).then(function(t){P({provider:"instagram",data:c({},t,e)})}).catch(function(e){S(e)})},[h,S,P]),E=i(function(e){if(_)P({provider:"instagram",data:{code:e}});else{var t={grant_type:"authorization_code",code:e,redirect_uri:l,client_id:a,client_secret:s},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?k?P({provider:"instagram",data:e}):j(e):S("no data")}).catch(function(e){S(e)}).finally(function(){})}},[S,P,j,a,l,s,_,k]),I=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"instagram"===n&&o&&E(o))}catch(e){return Promise.reject(e)}},[E]),T=i(function(){window.removeEventListener("storage",T,!1);var e=localStorage.getItem("instagram");e&&(I({provider:"instagram",type:"code",code:e}),localStorage.removeItem("instagram"))},[I]),R=i(function(){L&&L(),window.addEventListener("storage",T,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+g+"&client_id="+a+"&scope="+v+"&state="+n+"_instagram&redirect_uri="+l,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[v,n,a,l,L,g,T]);return e.createElement("div",{className:d,onClick:R},b)}),g=t(function(t){var o=t.tenant,n=void 0===o?"common":o,a=t.state,s=void 0===a?"":a,d=t.client_id,l=t.className,u=t.redirect_uri,p=t.scope,h=void 0===p?"profile openid email":p,m=t.response_type,v=void 0===m?"code":m,f=t.response_mode,g=void 0===f?"query":f,w=t.children,_=t.code_challenge,y=void 0===_?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":_,k=t.code_challenge_method,b=void 0===k?"plain":k,S=t.prompt,P=void 0===S?"select_account":S,L=t.isOnlyGetCode,j=void 0!==L&&L,E=t.isOnlyGetToken,I=void 0!==E&&E,T=t.onLoginStart,R=t.onReject,N=t.onResolve;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_microsoft")&&t&&(localStorage.setItem("microsoft",t),window.close())},[]);var z=i(function(e){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){return e.json()}).then(function(t){N({provider:"microsoft",data:c({},t,e)})}).catch(function(e){R(e)})},[R,N]),C=i(function(e){if(j)N({provider:"microsoft",data:{code:e}});else{var t={code:e,scope:h,client_id:d,redirect_uri:u,code_verifier:y,grant_type:"authorization_code"},o=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+n+"/oauth2/v2.0/token",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){e.access_token?I?N({provider:"microsoft",data:e}):z(e):R("no data")}).catch(function(e){R(e)})}},[h,n,R,z,d,N,u,y,j,I]),G=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"microsoft"===n&&o&&C(o))}catch(e){return Promise.reject(e)}},[C]),O=i(function(){window.removeEventListener("storage",O,!1);var e=localStorage.getItem("microsoft");e&&(G({provider:"microsoft",type:"code",code:e}),localStorage.removeItem("microsoft"))},[G]),x=i(function(){T&&T(),window.addEventListener("storage",O,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+n+"/oauth2/v2.0/authorize?client_id="+d+"\n        &response_type="+v+"\n        &redirect_uri="+u+"\n        &response_mode="+g+"\n        &scope="+h+"\n        &state="+s+"_microsoft\n        &prompt="+P+"\n        &code_challenge="+y+"\n        &code_challenge_method="+b,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[h,s,P,n,d,T,u,g,v,y,O,b]);return e.createElement("div",{className:l,onClick:x},w)}),w=t(function(t){var o=t.state,n=void 0===o?"":o,a=t.scope,s=void 0===a?"r_liteprofile":a,d=t.client_id,l=t.client_secret,u=t.className,h=void 0===u?"":u,m=t.redirect_uri,v=t.response_type,f=void 0===v?"code":v,g=t.isOnlyGetCode,w=void 0!==g&&g,_=t.isOnlyGetToken,y=void 0!==_&&_,k=t.children,b=t.onLoginStart,S=t.onReject,P=t.onResolve;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_linkedin")&&t&&(localStorage.setItem("linkedin",t),window.close())},[]);var L=i(function(e){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+e.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var o=c({},e);if(t.contents){var n=JSON.parse(t.contents);"object"==typeof e&&Object.entries(n).map(function(e){o[e[0]]=e[1]})}P({provider:"linkedin",data:o})}).catch(function(e){S(e)})},[S,P]),j=i(function(e){if(w)P({provider:"linkedin",data:{code:e}});else{var t={code:e,grant_type:"authorization_code",redirect_uri:m,client_id:d,client_secret:l},o=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:o,body:new URLSearchParams(t)}).then(function(e){return e.json()}).then(function(e){y?P({provider:"linkedin",data:e}):L(e)}).catch(function(e){S(e)})}},[S,P,d,L,m,l,w,y]),E=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"linkedin"===n&&o&&j(o))}catch(e){return Promise.reject(e)}},[j]),I=i(function(){window.removeEventListener("storage",I,!1);var e=localStorage.getItem("linkedin");e&&(E({provider:"linkedin",type:"code",code:e}),localStorage.removeItem("linkedin"))},[E]),T=i(function(){b&&b(),window.addEventListener("storage",I,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+f+"&client_id="+d+"&scope="+s+"&state="+n+"_linkedin&redirect_uri="+m,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[b,I,f,d,s,n,m]);return e.createElement("div",{className:h,onClick:T},k)}),_=t(function(t){var o=t.state,n=void 0===o?"":o,a=t.scope,s=void 0===a?"boards:read,pins:read,user_accounts:read":a,d=t.client_id,l=t.client_secret,u=t.className,h=void 0===u?"":u,m=t.redirect_uri,v=t.isOnlyGetCode,f=void 0!==v&&v,g=t.isOnlyGetToken,w=void 0!==g&&g,_=t.children,y=t.onLoginStart,k=t.onReject,b=t.onResolve;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_pinterest")&&t&&(localStorage.setItem("pinterest",t),window.close())},[]);var S=i(function(e){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+e.access_token,"x-cors-grida-api-key":p}}).then(function(e){return e.json()}).then(function(t){b({provider:"pinterest",data:c({},e,t)})}).catch(function(e){return k(e)})},[k,b]),P=i(function(e){try{var t=function(){if(!f){var t={code:e,redirect_uri:m,grant_type:"authorization_code"},o=[];for(var n in t){var r=encodeURIComponent(n),i=encodeURIComponent(t[n]);o.push(r+"="+i)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(d+":"+l),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p},body:o}).then(function(e){return e.json()}).catch(function(e){return k(e)})).then(function(e){e.access_token&&(w?b({provider:"pinterest",data:e}):S(e))})}b({provider:"pinterest",data:{code:e}})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[k,d,S,b,m,l,f,w]),L=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"pinterest"===n&&o&&P(o))}catch(e){return Promise.reject(e)}},[P]),j=i(function(){window.removeEventListener("storage",j,!1);var e=localStorage.getItem("pinterest");e&&(L({provider:"pinterest",type:"code",code:e}),localStorage.removeItem("pinterest"))},[L]),E=i(function(){y&&y(),window.addEventListener("storage",j,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+d+"&scope="+s+"&state="+n+"_pinterest&redirect_uri="+m+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[s,n,d,m,y,j]);return e.createElement("div",{className:h,onClick:E},_)}),y=t(function(t){var o=t.client_id,n=t.className,a=void 0===n?"":n,s=t.redirect_uri,d=t.children,l=t.fields,u=void 0===l?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":l,h=t.state,m=void 0===h?"state":h,v=t.scope,f=void 0===v?"users.read%20tweet.read":v,g=t.isOnlyGetCode,w=void 0!==g&&g,_=t.isOnlyGetToken,y=void 0!==_&&_,k=t.onLoginStart,b=t.onReject,S=t.onResolve;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code");e.searchParams.get("state")&&t&&(localStorage.setItem("twitter",""+t),window.close())},[]);var P=i(function(e){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+u,{method:"GET",headers:{Authorization:"Bearer "+e.access_token,"x-cors-grida-api-key":p}}).then(function(e){return e.json()}).then(function(t){S({provider:"twitter",data:c({},e,t.data)})}).catch(function(e){return b(e)})},[u,b,S]),L=i(function(e){try{var t=function(){if(!w){var t=new URLSearchParams({code:e,redirect_uri:s,client_id:o,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":p}}).then(function(e){return e.json()}).catch(function(e){return b(e)})).then(function(e){e.access_token&&(y?S({provider:"twitter",data:e}):P(e))})}S({provider:"twitter",data:{code:e}})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[b,P,S,o,s,w,y]),j=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"twitter"===n&&o&&L(o))}catch(e){return Promise.reject(e)}},[L]),E=i(function(){window.removeEventListener("storage",E,!1);var e=localStorage.getItem("twitter");e&&(j({provider:"twitter",type:"code",code:e}),localStorage.removeItem("twitter"))},[j]),I=i(function(){try{k&&k(),window.addEventListener("storage",E,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+o+"&redirect_uri="+s+"&scope="+f+"&state="+m+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e),Promise.resolve()}catch(e){return Promise.reject(e)}},[f,m,o,k,s,E]);return e.createElement("div",{className:a,onClick:I},d)});"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var k=window,b=t(function(t){var c=t.client_id,a=t.scope,s=void 0===a?"name email":a,d=t.className,l=void 0===d?"":d,u=t.onLoginStart,p=t.onReject,h=t.onResolve,m=t.redirect_uri,v=void 0===m?"/":m,f=t.children,g=o(null),w=n(!1),_=w[0],y=w[1];r(function(){!_&&L()},[_]),r(function(){return function(){g.current&&g.current.remove()}},[]);var b=i(function(){return!!document.getElementById("apple-login")},[]),S=i(function(e,t,o,n,r){void 0===t&&(t="script");var i=e.createElement(t);i.id=o,i.src=n,i.async=!0,i.defer=!0;var c=document.getElementsByTagName("script")[0];g.current=i,c&&c.parentNode&&c.parentNode.insertBefore(i,c),i.onload=r},[]),P=i(function(e){h({provider:"apple",data:e})},[h]),L=i(function(){b()?y(!0):S(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){k.AppleID.auth.init({clientId:c,scope:s,redirectURI:v,state:"origin:web",usePopup:!0}),y(!0)})},[s,c,v,S,b]),j=i(function(){try{if(!_)return Promise.resolve();var e=function(){if(k.AppleID){u&&u();var e=function(e,t){try{var o=Promise.resolve(k.AppleID.auth.signIn()).then(function(e){P(e)})}catch(e){return t(e)}return o&&o.then?o.then(void 0,t):o}(0,function(e){p({err:e})});if(e&&e.then)return e.then(function(){})}else L(),p("Apple SDK isn't loaded!")}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[P,_,L,u,p]);return e.createElement("div",{className:l,onClick:j},f)}),S=t(function(t){var o=t.state,n=void 0===o?"":o,c=t.scope,a=void 0===c?"user.info.basic":c,s=t.client_key,d=t.className,l=void 0===d?"":d,u=t.redirect_uri,p=t.children,h=t.onResolve,m=t.onLoginStart;r(function(){var e=new URL(window.location.href),t=e.searchParams.get("code"),o=e.searchParams.get("state");null!=o&&o.includes("_tiktok")&&t&&(localStorage.setItem("tiktok",t),window.close())},[]);var v=i(function(e){var t=e.type,o=e.code,n=e.provider;try{return Promise.resolve("code"===t&&"tiktok"===n&&o&&h({provider:"tiktok",data:{code:o}}))}catch(e){return Promise.reject(e)}},[h]),f=i(function(){window.removeEventListener("storage",f,!1);var e=localStorage.getItem("tiktok");e&&(v({provider:"tiktok",type:"code",code:e}),localStorage.removeItem("instagram"))},[v]),g=i(function(){m&&m(),window.addEventListener("storage",f,!1);var e=window.screen.width/2-225,t=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+s+"&scope="+a+"&state="+n+"_tiktok&redirect_uri="+u+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+t+", left="+e)},[a,n,s,u,m,f]);return e.createElement("div",{className:l,onClick:g},p)});export{d as LoginSocialAmazon,b as LoginSocialApple,u as LoginSocialFacebook,v as LoginSocialGithub,m as LoginSocialGoogle,f as LoginSocialInstagram,w as LoginSocialLinkedin,g as LoginSocialMicrosoft,_ as LoginSocialPinterest,S as LoginSocialTiktok,y as LoginSocialTwitter};
